!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).FunnelGraph=t()}}(function(){return function a(o,s,u){function c(e,t){if(!s[e]){if(!o[e]){var n="function"==typeof require&&require;if(!t&&n)return n(e,!0);if(l)return l(e,!0);var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}var i=s[e]={exports:{}};o[e][0].call(i.exports,function(t){return c(o[e][1][t]||t)},i,i.exports,a,o,s,u)}return s[e].exports}for(var l="function"==typeof require&&require,t=0;t<u.length;t++)c(u[t]);return c}({1:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.getDefaultColors=n.defaultColors=n.generateLegendBackground=void 0;n.generateLegendBackground=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"horizontal";return"string"==typeof t?"background-color: ".concat(t):1===t.length?"background-color: ".concat(t[0]):"background-image: linear-gradient(".concat("horizontal"===e?"to right, ":"").concat(t.join(", "),")")};var a=["#FF4589","#FF5050","#05DF9D","#4FF2FD","#2D9CDB","#A0BBFF","#FFD76F","#F2C94C","#FF9A9A","#FFB178"];n.defaultColors=a;n.getDefaultColors=function(t){for(var e=[].concat(a),n=[],r=0;r<t;r++){var i=Math.abs(Math.round(Math.random()*(e.length-1)));n.push(e[i]),e.splice(i,1)}return n}},{}],2:[function(t,e,n){"use strict";e.exports=t("./main").default},{"./main":3}],3:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var f=t("./number"),s=t("./path"),i=t("./graph");function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function v(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var o=function(){function c(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),this.containerSelector=t.container,this.gradientDirection=t.gradientDirection&&"vertical"===t.gradientDirection?"vertical":"horizontal",this.direction=t.direction&&"vertical"===t.direction?"vertical":"horizontal",this.labels=c.getLabels(t),this.subLabels=c.getSubLabels(t),this.values=c.getValues(t),this.percentages=this.createPercentages(),this.colors=t.data.colors||(0,i.getDefaultColors)(this.is2d()?this.getSubDataSize():2),this.displayPercent=t.displayPercent||!1,this.height=t.height,this.width=t.width}var t,e,n;return t=c,n=[{key:"getSubLabels",value:function(t){if(!t.data)throw new Error("Data is missing");var e=t.data;return void 0===e.subLabels?[]:e.subLabels}},{key:"getLabels",value:function(t){if(!t.data)throw new Error("Data is missing");var e=t.data;return void 0===e.labels?[]:e.labels}},{key:"getValues",value:function(t){if(!t.data)return[];var e=t.data;return e instanceof Array?Number.isInteger(e[0])?e:e.map(function(t){return t.value}):"object"===a(e)?t.data.values:[]}},{key:"createSVGElement",value:function(t,e,n){var r=document.createElementNS("http://www.w3.org/2000/svg",t);return"object"===a(n)&&c.setAttrs(r,n),void 0!==e&&e.appendChild(r),r}},{key:"setAttrs",value:function(e,n){"object"===a(n)&&Object.keys(n).forEach(function(t){e.setAttribute(t,n[t])})}}],(e=[{key:"getMainAxisPoints",value:function(){for(var t=this.getDataSize(),e=[],n=this.isVertical()?this.getHeight():this.getWidth(),r=0;r<=t;r++)e.push((0,f.roundPoint)(n*r/t));return e}},{key:"getCrossAxisPoints",value:function(){var t=[],e=this.getFullDimension(),n=e/2;if(this.is2d()){var r=this.getValues2d(),i=Math.max.apply(Math,v(r));r.push(v(r).pop()),t.push(r.map(function(t){return(0,f.roundPoint)((i-t)/i*n)}));for(var a=this.getPercentages2d(),o=t[0],s=1;s<this.getSubDataSize();s++){for(var u=t[s-1],c=[],l=0;l<this.getDataSize();l++)c.push((0,f.roundPoint)(u[l]+(e-2*o[l])*(a[l][s-1]/100)));c.push([].concat(c).pop()),t.push(c)}t.push(o.map(function(t){return e-t}))}else{var h=Math.max.apply(Math,v(this.values)),d=v(this.values).concat(v(this.values).pop());t.push(d.map(function(t){return(0,f.roundPoint)((h-t)/h*n)})),t.push(t[0].map(function(t){return e-t}))}return t}},{key:"getGraphType",value:function(){return this.values&&this.values[0]instanceof Array?"2d":"normal"}},{key:"is2d",value:function(){return"2d"===this.getGraphType()}},{key:"isVertical",value:function(){return"vertical"===this.direction}},{key:"getDataSize",value:function(){return this.values.length}},{key:"getSubDataSize",value:function(){return this.values[0].length}},{key:"getFullDimension",value:function(){return this.isVertical()?this.getWidth():this.getHeight()}},{key:"addLabels",value:function(){var s=this;this.container.style.position="relative";var u=document.createElement("div");u.setAttribute("class","svg-funnel-js__labels"),this.percentages.forEach(function(t,e){var n=document.createElement("div");n.setAttribute("class","svg-funnel-js__label label-".concat(e+1));var r=document.createElement("div");r.setAttribute("class","label__title"),r.textContent=s.labels[e]||"";var i=document.createElement("div");i.setAttribute("class","label__value");var a=s.is2d()?s.getValues2d()[e]:s.values[e];i.textContent=(0,f.formatNumber)(a);var o=document.createElement("div");o.setAttribute("class","label__percentage"),100!==t&&(o.textContent="".concat(t.toString(),"%")),n.appendChild(i),n.appendChild(r),s.displayPercent&&n.appendChild(o),u.appendChild(n)}),this.container.appendChild(u)}},{key:"addSubLabels",value:function(){var n=this;if(this.subLabels){var t=document.createElement("div");t.setAttribute("class","svg-funnel-js__subLabels");var r="";this.subLabels.forEach(function(t,e){r+='<div class="svg-funnel-js__subLabel svg-funnel-js__subLabel-'.concat(e+1,'">\n    <div class="svg-funnel-js__subLabel--color" \n        style="').concat((0,i.generateLegendBackground)(n.colors[e],n.gradientDirection),'"></div>\n    <div class="svg-funnel-js__subLabel--title">').concat(t,"</div>\n</div>")}),t.innerHTML=r,this.container.appendChild(t)}}},{key:"createContainer",value:function(){if(!this.containerSelector)throw new Error("Container is missing");this.container=document.querySelector(this.containerSelector),this.container.classList.add("svg-funnel-js"),this.graphContainer=document.createElement("div"),this.graphContainer.classList.add("svg-funnel-js__container"),this.container.appendChild(this.graphContainer),"vertical"===this.direction&&this.container.classList.add("svg-funnel-js--vertical")}},{key:"getValues2d",value:function(){var e=[];return this.values.forEach(function(t){e.push(t.reduce(function(t,e){return t+e},0))}),e}},{key:"getPercentages2d",value:function(){var n=[];return this.values.forEach(function(t){var e=t.reduce(function(t,e){return t+e},0);n.push(t.map(function(t){return(0,f.roundPoint)(100*t/e)}))}),n}},{key:"createPercentages",value:function(){var t=[];t=this.is2d()?this.getValues2d():v(this.values);var e=Math.max.apply(Math,v(t));return t.map(function(t){return(0,f.roundPoint)(100*t/e)})}},{key:"applyGradient",value:function(t,e,n,r){var i=null===t.querySelector("defs")?c.createSVGElement("defs",t):t.querySelector("defs"),a="funnelGradient-".concat(r),o=c.createSVGElement("linearGradient",i,{id:a});"vertical"===this.gradientDirection&&c.setAttrs(o,{x1:"0",x2:"0",y1:"0",y2:"1"});for(var s=n.length,u=0;u<s;u++)c.createSVGElement("stop",o,{"stop-color":n[u],offset:"".concat(Math.round(100*u/(s-1)),"%")});c.setAttrs(e,{fill:'url("#'.concat(a,'")'),stroke:'url("#'.concat(a,'")')})}},{key:"makeSVG",value:function(){for(var t=c.createSVGElement("svg",this.graphContainer,{width:this.getWidth(),height:this.getHeight()}),e=this.getCrossAxisPoints().length-1,n=0;n<e;n++){var r=c.createSVGElement("path",t),i=this.is2d()?this.colors[n]:this.colors,a="string"==typeof i||1===i.length?"solid":"gradient";"solid"===a?c.setAttrs(r,{fill:i,stroke:i}):"gradient"===a&&this.applyGradient(t,r,i,n+1),t.appendChild(r)}this.graphContainer.appendChild(t)}},{key:"getSVG",value:function(){var t=this.container.querySelector("svg");if(!t)throw new Error("No SVG found inside of the container");return t}},{key:"getWidth",value:function(){return this.width||this.graphContainer.clientWidth}},{key:"getHeight",value:function(){return this.height||this.graphContainer.clientHeight}},{key:"createPath",value:function(t){for(var e=this.getMainAxisPoints(),n=this.getCrossAxisPoints()[t],r=this.getCrossAxisPoints()[t+1],i="M".concat(e[0],",").concat(n[0]),a=0;a<e.length-1;a++)i+=(0,s.createCurves)(e[a],n[a],e[a+1],n[a+1]);i+=" L".concat(v(e).pop(),",").concat(v(r).pop());for(var o=e.length-1;0<o;o--)i+=(0,s.createCurves)(e[o],r[o],e[o-1],r[o-1]);return i+=" Z"}},{key:"createVerticalPath",value:function(t){for(var e=this.getCrossAxisPoints()[t],n=this.getCrossAxisPoints()[t+1],r=this.getMainAxisPoints(),i="M".concat(e[0],",").concat(r[0]),a=0;a<e.length-1;a++)i+=(0,s.createVerticalCurves)(e[a],r[a],e[a+1],r[a+1]);i+=" L".concat(v(n).pop(),",").concat(v(r).pop());for(var o=e.length-1;0<o;o--)i+=(0,s.createVerticalCurves)(n[o],r[o],n[o-1],r[o-1]);return i+=" Z"}},{key:"draw",value:function(){this.createContainer(),this.makeSVG();var t=this.getSVG();this.addLabels(),this.is2d()&&this.addSubLabels();for(var e=t.querySelectorAll("path"),n=0;n<e.length;n++){var r=this.isVertical()?this.createVerticalPath(n):this.createPath(n);e[n].setAttribute("d",r)}}}])&&r(t.prototype,e),n&&r(t,n),c}();n.default=o},{"./graph":1,"./number":4,"./path":5}],4:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.formatNumber=n.roundPoint=void 0;n.roundPoint=function(t){return Math.round(10*t)/10};n.formatNumber=function(t){return Number(t).toFixed().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")}},{}],5:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.createVerticalCurves=n.createCurves=void 0;var i=t("./number");n.createCurves=function(t,e,n,r){return" C".concat((0,i.roundPoint)((n+t)/2),",").concat(e," ")+"".concat((0,i.roundPoint)((n+t)/2),",").concat(r," ").concat(n,",").concat(r)};n.createVerticalCurves=function(t,e,n,r){return" C".concat(t,",").concat((0,i.roundPoint)((r+e)/2)," ")+"".concat(n,",").concat((0,i.roundPoint)((r+e)/2)," ").concat(n,",").concat(r)}},{"./number":4}]},{},[2])(2)});